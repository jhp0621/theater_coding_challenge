<% @title = @showtime.movie.title %>
<% @start_time = @showtime.start_time %>
<% @availability = @showtime.availability %>
<% @min = 1 %>
<% @months = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'] %>
<% @year = Date.today.strftime("%y").to_i %>
<% @years = (@year...@year+11).to_a %>

<h1>Purchase ticket</h1>
<div>Movie title: <%= @title %></div>
<div>Time: <%= @start_time %></div>

<%= form_with(model: @order, local:true) do |form| %>
<%= form.hidden_field :showtime_id, value: @showtime.id %>

   <% if @order.errors.any? %>
      <ul>
        <% @order.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
  <% end %>

  <%= form.label :quantity %>
  <%= form.number_field :quantity, in: "#{@min}".."#{@availability}" %>

  <%= form.label :first_name %>
  <%= form.text_field :first_name %>

  <%= form.label :last_name %>
  <%= form.text_field :last_name %>

  <%= form.label :email %>
  <%= form.email_field :email %>

  <%= form.label :credit_card_number %>
  <%= form.text_field :credit_card_number %>

  <div>Expiration Date</div>
  <%= form.label :month %>
  <%= form.select :month, @months, :prompt => 'MM' %>

  <%= form.label :year %>
  <%= form.select :year, @years, :prompt => 'YY' %>


  <%= form.submit "Submit" %>
<% end %>